<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="../../../logo.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../src/styles.css">
    <title>LBDviz</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>   
    <script src="bundle.js" type="module"></script>
    <div> 
        <div id="topbar">
            <img src="../logo.png"/ alt="LBDviz logo" height="50">
            <a class="header-text">LBD</a><a class="header-text-handwritten">viz</a>
            <a class="header-text" id="project-name" style="padding-left:480px">PROJECT NAME</a><a class="header-text" id="selected-guid" style="padding-left:20px"></a>
        </div> 

        <div id="energybar">
            <table>
                <tr>
                    <th></th>
                    <th>Now</th>
                    <th>Total</th>
                </tr>
                <tr>
                    <td><img id="EnergySocketImage" style="width:20px" src='../resources/Socket_off.png'>Energy Socket</td>
                    <td id="EnergySocketActivePower-box-content"></td>
                    <td id="EnergySocketTotalPower-box-content"></td>
                </tr>
                <tr>
                    <td><img id="P1MeterImage" style="width:20px" src='../resources/Power_off.png'>P1Meter</td>
                    <td id="P1MeterActivePower-box-content"></td>
                    <td id="P1MeterTotalPower-box-content"></td>
                </tr>
                <tr>
                    <td><img id="WaterMeterImage" style="width:20px" src='../resources/Water_off.png'>Water</td>
                    <td id="WaterMeterActiveLiter-box-content"></td>
                    <td id="WaterMeterTotalLiter-box-content"></td>
                </tr>  
            </table>
        </div>

        <div id="sidebar" style="max-height: 850px">
            <button class="accordion">Options</button>
            <div class="panel">
                <div class="optionstab">
                    <button class="optionstablinks" onclick="openOptionsTab(event, 'tools-tab')" id="defaultOptionsOpen">Tools</button>
                    <button class="optionstablinks" onclick="openOptionsTab(event, 'settings-tab')">Settings</button>
                    <button class="optionstablinks" onclick="openOptionsTab(event, 'auth-tab')">Authorization</button>
                    <button class="optionstablinks" onclick="openOptionsTab(event, 'energy-tab')">Energy</button>

                </div>
                  
                <div id="tools-tab" class="optionstabcontent">
                    <button class="options-button" id="load-ifc-button"><img id="folder-image" src="../resources/Folder.png" height="20px" style="float:center">Load IFC</i></button>
                    <button class="options-button" id="load-default-ifc-button"><img id="folder-image" src="../resources/Folder.png" height="20px">Default IFC</i></button>
                </div>

                <div id="settings-tab" class="optionstabcontent">
                    <p>Influx URL</p>
                    <textarea id="INFLUX-url" class="INFLUX-url" onchange="queryInflux()" rows="1" cols="50">Influx URL</textarea>
                    <p>Influx token</p>
                    <textarea id="INFLUX-token" class="INFLUX-token" onchange="queryInflux()" rows="1" cols="50">Influx token</textarea>
                    <p>Influx org</p>
                    <textarea id="INFLUX-org" class="INFLUX-org" onchange="queryInflux()" rows="1" cols="50">Influx org</textarea>
                </div>

                <div id="energy-tab" class="optionstabcontent">
                    <p>Electricity meter IP</p>
                    <textarea id="Electricity-meter-IP" class="Electricity-meter-IP" onchange="requestWaterMeterData(); requestEnergySocketData(); requestP1MeterData()" rows="1" cols="50">192.168.68.110</textarea>
                    <p>Water meter IP</p>
                    <textarea id="Water-meter-IP" class="Water-meter-IP" onchange="requestWaterMeterData(); requestEnergySocketData(); requestP1MeterData()"rows="1" cols="50">192.168.68.112</textarea>
                    <p>Energy socket IP</p>
                    <textarea id="Energy-socket-IP" class="Energy-socket-IP" onchange="requestWaterMeterData(); requestEnergySocketData(); requestP1MeterData()"rows="1" cols="50">192.168.68.113</textarea>
                    <p>Energy frequency (milliseconds)</p>
                    <textarea id="Energy-frequency" class="Energy-frequency" onchange="requestWaterMeterData(); requestEnergySocketData(); requestP1MeterData()"rows="1" cols="50">3000</textarea>
                </div>

                <div id="auth-tab" class="optionstabcontent">
                    
                </div>

            </div>

            <br><button class="accordion">Queries</button>
            <div class="panel">
                <div class="tab">
                    <button class="tablinks" onclick="openQueryTab(event, 'find-tab')" >Find</button>
                    <button class="tablinks" onclick="openQueryTab(event, 'sparql-tab')"id="defaultOpen">SPARQL</button>
                    <button class="tablinks" onclick="openQueryTab(event, 'graph-locator-tab')">Graph locator</button>
                  </div>
                  
                  <div id="find-tab" class="tabcontent">
                    <button class="find-button" id="find-all-walls" onclick="queryComunicaGlobalIdProps()"><img id="folder-image" src="../resources/Size.png" height="20px"></i>Properties of selected element</button>
                    <button class="find-button" id="find-all-walls" onclick="queryComunicaWalls()"><img id="folder-image" src="../resources/Wall.png" height="20px"></i>Find all walls</button>
                    <button class="find-button" id="find-all-sensordata" onclick="queryInflux()"><img id="folder-image" src="../resources/Chart.png" height="20px" ></i>Find all sensor data</button>
                  </div>
                  
                  <div id="sparql-tab" class="tabcontent">       
                    <textarea id="SPARQL-input" class="SPARQL-input" rows="12" cols="50">
PREFIX bot: <https://w3id.org/bot#>
SELECT * WHERE {
    ?s ?p bot:Building.
    ?s ?p ?o
} 
LIMIT 100
                    </textarea>
                    <input type="button" class="SPARQL-submit" id="SPARQL-submit" value="Run query!" onclick="queryComunica()"><br>                   
                  </div>
                  
                  <div id="graph-locator-tab" class="tabcontent">
                    <p>Separate multiple graphs with commas</p>
                    <textarea id="GRAPH-input" class="GRAPH-input" onchange="queryComunicaProjectName()" rows="12" cols="50">https://raw.githubusercontent.com/AlexDonkers/ofo/main/SWJ_Resources/OpenFlat/OpenFlat_Donkers.ttl
                    </textarea>
                  </div>
            </div>

            <br><button class="accordion">Results</button>
            <div class="panel">
                <p><span id="results-box-content"></span></p>
            </div>
            
            <br><button class="accordion">Sensor data</button>
            <div class="panel">
                <div>
                    <canvas id="myChart"></canvas>
                </div>
                <p><span id="sensor-data-box-content"></span></p>
            </div>
        </div>

        <div id="viewer-container" class="viewer-container" style="background-color:#E2F0D9"></div>

        <div id="logobar">
            <a href="https://www.tue.nl/en/research/researchers/alex-donkers/" target="_blank"style="font-family:'MONSTERA'; color: white; font-size:25px; padding-left: 35px; text-decoration:none">by Alex Donkers</a><br>            
            <a href="https://www.tue.nl/"target="_blank"><img  src="../resources/TUE.png"/ alt="TUE logo" height="40" style="vertical-align: middle;"></a>
            <a href="https://www.kpn.nl/"target="_blank"><img src="../resources/kpn.png"/ alt="KPN logo" height="50" style="vertical-align: middle;"></a>
            <a href="https://www.github.nl/AlexDonkers/LBDviz"target="_blank"><img src="../resources/GitHub.png"/ alt="GitHub logo" height="40" style="vertical-align: middle; padding-left: 10px"></a>
        </div>

        <div id="loading-overlay" class="loading-overlay hidden">
            <h1 id="loading-progress" class="loading-progress"></h1>
        </div>

    </div>

    <script src="/src/chart.js"></script>
</body>
</html>